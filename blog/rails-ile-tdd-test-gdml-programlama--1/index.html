<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Rails ile TDD - 1 (Giriş)</title>
    
    <meta name="description" content="Ruby, JavaScript, Clojure ve diğer yazılım maceralarım
">
    
    <link rel="canonical" href="http://turhancoskun.com/blog/rails-ile-tdd-test-gdml-programlama--1/">
    <link href='http://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic,700italic|Didact+Gothic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
</head>


<body class="showing-post">
  <div class="pure-g">
    <div class="content pure-u-1 pure-u-md-3-4">
      <div>
          <div class="post-nav-bar pure-g">
            <div class="pure-u-1-3">
              <figure>
                <a href="/">
                  <img class="post-avatar" src="/assets/profile200x200.jpg" alt="Turhan Coskun" />
                </a>
              </figure>
            </div>
            <div class="blog-name pure-u-1-3">
              <div><a href="/">Turhan Coskun</a></div>
            </div>
            <div class="pure-u-1-3">
            </div>
          </div>

        <div class="post">
          <header class="post-header">
            <h1 class="post-title">Rails ile TDD - 1 (Giriş)</h1>
            <div class="post-meta">Nov 15, 2014
            <div>
              
              <a class="post-category" href="/tag/Ruby">Ruby</a>
              
              <a class="post-category" href="/tag/Ruby on Rails">Ruby on Rails</a>
              
              <a class="post-category" href="/tag/TDD">TDD</a>
              
              <a class="post-category" href="/tag/Dersler">Dersler</a>
              
            </div>
            </div>
          </header>

          <article class="post-content">
            <p>Merhaba, bugün ilk kez Rails ile ilgili bir konudan bahsetmek
istiyorum: <em>Ruby on Rails uygulamalarının TDD ile geliştirilmesi.</em></p>

<p>Öncelikle yazı dizisinde yer alacak konu başlıklarına bakarsanız:</p>

<ol>
  <li>Giriş (Şu an okuduğunuz bölüm)</li>
  <li>Model’ler nasıl test edilir</li>
  <li>Controller’lar nasıl test edilir</li>
  <li>Json Api ve Integration Test nasıl gerçekleştirilir</li>
  <li>Capybara ile Acceptance testleri nasıl gerçekleştirilir</li>
</ol>

<p>Bu yazı dizisini bitirdiğinizde, kodlarının büyük çoğunluğu test edilebilen, tam teşekküllü bir Rails uygulaması nasıl yapılır ilk adımı atmış olacaksınız.</p>

<p>Yazı dizisinin bitiminde bonus olarak bir de JavaScript testlerinin de
nasıl yapılacağını, özellikle AngularJS testlerinin nasıl yapılacağı konusuna da değinebilirim(Henüz karar vermedim).</p>

<p>Bütün anlatımlarımı bir GitHub reposunda paylaşacağım ve tüm commitleri ve kod değişimlerini oradan da takip edebilirsiniz.</p>

<p>Başlangıç olarak ve anlatılanları daha sağlıklı anlayabilmek açısından en azından başlangıç seviyesinde Ruby dili ve Rails bilmenizi öneririm yine de sıfırdan proje başlatacağım için hali hazırda herhangi bir MVC framework bilen birisi için uygulamanın gidişini takip etmek o kadar da zor olmayacaktır. Git bilmenizi mutlaka öneririm, eğer bilmiyorsanuz git ile ilgili kısımları görmezden gelebilirsiniz.</p>

<p>Örnekleri geliştirirken versiyon uyumsuzluğu olmaması için kullandığım sürümleri paylaşıyorum:</p>

<ul>
  <li>Rails: 4.1.6</li>
  <li>Ruby: 2.1.3</li>
</ul>

<p>Text editör olarak baştan sona Vim kullanacağım, belki bazı yerlerde Atom Editor kullanabilirim. (SublimeText’i oldum olası sevmedim.) Siz istediğiniz başka bir editör kullanabilirsiniz. Tavsiyem asla IDE kullanmayın, sağa sola saçma sapan dosyalar oluşturarak kafanızı karıştırabilir.</p>

<h1 id="rails-projesinin-oluturulmas">Rails Projesinin Oluşturulması</h1>
<p>Projenin bulunduğu reponun bağlantısı: <a href="https://github.com/turhancoskun/rails-ile-tdd">https://github.com/turhancoskun/rails-ile-tdd</a></p>

<p>Yeni proje başlatmak için:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">rails new rails-ile-tdd -T</code></pre></div>

<p>burada rails-ile-tdd adında yeni bir proje oluşturduk ve -T parametresi ile rails’e herhangi bir testing framework kurmamasını söyledik çünkü herşeyi manuel olarak gerçekleştirmek istiyoruz.</p>

<p>Rails ile testlerimizi gerçekleştirmek için oldukça popüler olan <a href="https://github.com/rspec/rspec">Rspec</a> kütüphanesini kullanacağız ama öncellikle rails uygulamamızı git ile commit edelim.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">git add --all
git commit -m <span class="s2">&quot;Rails projesi oluşturuldu&quot;</span></code></pre></div>

<h2 id="rspec-kurulumu-ve-yaplandrlmas">Rspec Kurulumu ve Yapılandırılması</h2>
<p>Rspec kurulumu yapmak için git üzerinde yeni bir dal açıyoruz:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">git checkout -b rspec-kurulum</code></pre></div>

<p>Yukarıdaki komut kısaca rspec-kurulum adında bir dal oluşturacak ve bu dala geçiş yapacaktır. Proje akışının düzenli olması açısından ve işler ters gittiğinde bazen geriye dönmemiz gerektiğinde sıkıntı yaşamamak için git repolarımızı düzenli tutmaya özen göstermeliyiz.</p>

<p>Şimdi projemizin ana klasöründe bulunan Gemfile dosyasını açalım ve en altına:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">group</span> <span class="ss">:development</span><span class="p">,</span> <span class="ss">:test</span> <span class="k">do</span>
  <span class="n">gem</span> <span class="s1">&#39;rspec-rails&#39;</span>
<span class="k">end</span></code></pre></div>

<p>Bu kod rspec’in geliştirme ve test aşamalarında projemizde kurulu olacağını ancak canlı ortamda kullanılmayacağını belirtiyor.</p>

<p>kodunu ekleyip kaydedin. Ardından konsolda:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">bundle install</code></pre></div>

<p>komutunu vererek rails projemize gerekli rspec kütüphanelerimizi eklemiş olacağız.</p>

<p>şimdi konsolunuza aşağıdaki komutu girin:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">rails generate rspec:install -p</code></pre></div>

<p>alacağınız ekran görüntüsü aşağıdaki gibi olacaktır:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">rails generate rspec:install -p
      create  .rspec
      create  spec
      create  spec/spec_helper.rb
      create  spec/rails_helper.rb</code></pre></div>

<p>komutumuzun arkasından gelen -p parametresi İngilizce pretend kelimesinin kısaltmasıdır, yani dilimize ‘gibi davranmak’ olarak çevrilebilir. <em>rails generate</em> ya da kısaltması <em>rails g</em> komutlarının arkasına koyduğumuz -p ifadesi komutun <strong>gibi davranmasını</strong> ve aslında çalışınca neler değişeceğini ekrana göstermesi için kullanılan çok kullanışlı bir parametredir.</p>

<p>Oluşturulacak dosyaları tek tek incelediğimizde .rspec dosyası rspec komutu çalıştırıldığında arkasına otomatik gelecek parametrelerin listesinin bulunduğu bir basit bir yazı dosyası.</p>

<p>spec klasörü testlerimizin ve alakalı dosyalarının tutulacağı dizin. Burada bilmemiz gereken Rspec jargonlarında testlerin spec olarak anılmaları. spec_helper.rb dosyası tüm testlerde ortak kullanılacak yardımcı metotların tutulacağı dosya ve rails_helper ise bizim daha çoğunlukla kullanacağımız dosya ve aslında spec_helper’ın rails için özelleşmiş versiyonu da denebilir. Bu dosyayı tüm rails testlerinin üst kısımlarına ekleyeceğiz.</p>

<p>Artık rspec’in dosya yapısı hakkında genel bir kanıya sahip olduğumuza göre gerçek komutu çalıştırabiliriz.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">rails generate rspec:install</code></pre></div>

<p>Şimdi Rails uygulamalarını test edebilmek için bize gereken rspec silahlarına sahibiz.</p>

<p>Son olarak yaptığımız değişiklikleri git repomuza yollamak için.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">git add --all
git commit -m <span class="s2">&quot;Rspec kurulumu&quot;</span>
git checkout master
git merge rspec-kurulum
git branch -d rspec-kurulum</code></pre></div>

<p>Yazı serisinin giriş bölümü sona erdi. Devamı için <a href="/blog/rails-ile-tdd--2-modellerin-test-edilmesi/">buraya</a> tıklayın.</p>

          </article>

          <div class="social-share">
            <span>
              <a href="https://twitter.com/share" class="twitter-share-button" data-url="" data-via="turhanco" data-lang="tr">Tweet</a>
            </span>
            <span>
              <div class="fb-like" data-href="" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true">
              </div>
            </span>
          </div>

          <div id="disqus_thread"></div>
          <script type="text/javascript">
            var disqus_shortname = 'turhancoskunblog';
            (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
          </script>

          <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          <div id="fb-root"></div>

          <script>(function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/tr_TR/sdk.js#xfbml=1&appId=1469686916649684&version=v2.0";
            fjs.parentNode.insertBefore(js, fjs);
          }(document, 'script', 'facebook-jssdk'));</script>

          <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
          <p>
            <a href="/">Ana Sayfaya Dön</a>
          </p>

        </div>
      </div>
    </div>

  </div>
  <link rel="stylesheet" href="/css/framework/pure-min.css">
  <link rel="stylesheet" href="/css/framework/grids-responsive-min.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/site.css">

  <script type="text/javascript" src="/js/post.js"></script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-41396472-1', 'auto');
    ga('require', 'displayfeatures');
    ga('send', 'pageview');

  </script>

</body>

</html>
